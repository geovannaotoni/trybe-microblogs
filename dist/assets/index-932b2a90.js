(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();function a(e){const o=document.querySelector("#users-select");e.map(r=>{const s=document.createElement("option");s.setAttribute("value",r.id),s.innerText=r.firstName,o.appendChild(s)})}function m(e){if(e.length===0)return;const o=document.querySelector("#posts-section"),r=document.querySelector("#featured-post-title"),s=document.querySelector("#featured-post-body"),t=document.querySelector("#related-posts-section");o.classList.remove("invisible");const n=[...e],c=n.pop();if(r.innerText=c.title,s.innerText=c.body,n.length===0)return;const i=document.createElement("h2");i.innerText="Related posts",t.appendChild(i),n.map(d=>{const l=document.createElement("p");l.innerText=d.title,t.appendChild(l)})}function p(e){if(e.length===0)return;const o=document.querySelector("#featured-post-comments"),r=document.createElement("h3");r.innerText="Comments",o.appendChild(r),e.map(s=>{const t=document.createElement("p");t.innerText=s.body,o.appendChild(t)})}function f(e){const o=document.querySelector("#error-message");o.classList.remove("invisible"),o.innerText=e}function y(){const e=document.querySelector("#posts-section"),o=document.querySelector("#featured-post-title"),r=document.querySelector("#featured-post-body"),s=document.querySelector("#related-posts-section"),t=document.querySelector("#featured-post-comments"),n=document.querySelector("#error-message");o.innerHTML="",r.innerHTML="",s.innerHTML="",t.innerHTML="",n.innerHTML="",e.classList.add("invisible"),n.classList.add("invisible")}const u=document.querySelector("#users-select"),h="https://dummyjson.com/users";fetch(h).then(e=>e.json()).then(e=>a(e.users));u.addEventListener("change",()=>{y(),fetch(`https://dummyjson.com/posts/user/${u.value}`).then(e=>e.json()).then(e=>{m(e.posts),fetch(`https://dummyjson.com/posts/${e.posts[0].id}/comments`).then(o=>o.json()).then(o=>p(o.comments))}).catch(e=>{f("Erro ao recuperar informações"),console.log(e.message)})});
